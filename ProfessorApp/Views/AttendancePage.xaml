<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="ProfessorApp.Pages.AttendancePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    BackgroundColor="#222">

    <Grid>

        <!--  Main Content  -->
        <VerticalStackLayout Padding="20" Spacing="10">

            <Label
                FontAttributes="Bold"
                FontSize="24"
                HorizontalOptions="Center"
                Text="Attendance Records"
                TextColor="White" />

            <!-- Filters -->
            <HorizontalStackLayout Spacing="10">
                <Picker x:Name="SessionFilterPicker" Title="Session" TextColor="White" SelectedIndexChanged="OnFilterChanged" />
                <Entry x:Name="FirstNameFilterEntry" Placeholder="First Name" TextColor="White" TextChanged="OnFilterTextChanged" />
                <Entry x:Name="LastNameFilterEntry" Placeholder="Last Name" TextColor="White" TextChanged="OnFilterTextChanged" />
                <Entry x:Name="UTDIDFilterEntry" Placeholder="UTDID" TextColor="White" TextChanged="OnFilterTextChanged" />
                <Picker x:Name="TypeFilterPicker" Title="Type" TextColor="White" SelectedIndexChanged="OnFilterChanged" />
                <VerticalStackLayout Spacing="2">
                    <Label Text="From" TextColor="White" FontSize="12" />
                    <DatePicker x:Name="FromDatePicker" TextColor="White" DateSelected="OnDateFilterChanged" />
                </VerticalStackLayout>
                <VerticalStackLayout Spacing="2">
                    <Label Text="To" TextColor="White" FontSize="12" />
                    <DatePicker x:Name="ToDatePicker" TextColor="White" DateSelected="OnDateFilterChanged" />
                </VerticalStackLayout>
                <Button Text="Clear" BackgroundColor="Gray" TextColor="White" Clicked="OnClearFiltersClicked" />
            </HorizontalStackLayout>

            <!-- Records -->
            <CollectionView x:Name="AttendanceCollectionView" HeightRequest="400">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BackgroundColor="#333" CornerRadius="8" Padding="10" Margin="0,5">
                            <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,Auto" ColumnSpacing="10">
                                <Label Text="{Binding FirstName}" TextColor="White" Grid.Column="0" />
                                <Label Text="{Binding LastName}" TextColor="White" Grid.Column="1" />
                                <Label Text="{Binding UTDID}" TextColor="White" Grid.Column="2" />
                                <Label Text="{Binding SubmissionTime}" TextColor="White" Grid.Column="3" />
                                <Label Text="{Binding AttendanceType}" TextColor="White" Grid.Column="4" />
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>

    </Grid>
</ContentPage>
